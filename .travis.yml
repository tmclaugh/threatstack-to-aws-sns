language: python
python:
- '3.6'
install: pip install -r requirements.txt -t .
script:
- true
after_success:
- mkdir dist
- find ./ -name '*.pyc' -delete
- zip -r dist/threatstack-to-aws-sns.zip . -x '.git/*' -x 'dist/*'
- cp deploy/cloudformation.json dist/threatstack-to-aws-sns.json
- ls -al dist
- cat dist/threatstack-to-aws-sns.json
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id:
    secure: "IYxw0VDr0GiI9K2L06xbCxTHuYwQGsDCkitE74idxMjaU+v7TtE1GKZl+dIgBi6iorUxLccDNGJo5RQL8bwRfAaCM4P2A+uk2IsBYtfGvr8gTkcsAWlDiCqr+pkWivK3Ix2bX0jNtPuHLfzHKo40KaPlQfsnohXCDVKxxVxIQhFTCemj4vScQ8DZGYbBscpUlJxwuVoHYMSNh25XsBQKTQuKxE+RYJPsGJCUZFmmHFLmF+ArQ9gloc7/gxvSAfjdjD4QYQ+QrtpJrUreZjSBe6l4FhvDMvvIABKgYCQL35lO7y9LTWdI2rgf57YtWiXkzFvF4U2CI/TEgS3nlOvhTj8U82qjwiaN8hnqaJxJCQI+0fzEjD/a+vQn4wtYJN36KHoo9K5WXCnQvDKvoYISoYQPcZjVJU4Om3MuTOfW6Vd8ebhDGxmWcKsaBy5XVikBzJhUECNc9C2aw6eGhqtuyhj6FsEZDcvESvpBr0FQ4fRRm1vj1R4tY5lKHpCMYEwMqcj4GB8dWmeySiZU5ezoZQyYmqqNMasfu7N6qxDHUw9cEY5EC7VMJIgvsUMxWdBAVfX7OLrCd3jwXBEDFPRWu9KPWaI1cguvAY18j+k7hpHSMWmcapT1qOqqplu+KQ0TtDYp/URl7R22H+1aYyJ6M/gGIoRkdPr+YJ/uiLVio4A="
  secret_access_key:
    secure: "nhR3eRi0jrLsMuCq7oYL8CcdWZTqlgtBm/cZno+sbgizKIspLq1S7I+6pV+s5rVSm10IJKxRkq/djhBvlW3yEngXml6yivVPzAXb0FE5wA1L3SK4Hguec+IvqomF8fgpIV0m9wGT1rMtVKhsvnoP30Bi/TXFl9VsE+zVTwW41p8o3KgGFB3shcjm+SvVQY0URfCZC86NUvn3heWz89cLdawEPZqv1AuUraNLvaa0eDL3XD8V34U/SfnG8THV/4Ic/eZOIA99YSdhSr1N45X3Bc/XVC2Wp/OzJNK8aLmEkYAUxf0czpK6Zzxr52BaHwIUPL8fs/jBAJrhAOB0+jZwYEGo0+Y8dIkY4c3YQ7+5Wbwrdxm6+I6Omb+21QPkDJPlrKBGbfIvQ9qmm+l1KDtlyoEholSqBBhfXnqSw5ARCw88wXcFl96ROsWWELI9Hzu4uLP/dCVSiJf5Z+ao7+KfHja6eKFMUBO8y14qrUyhNrIvkFP3Un+25LQ4UNxHwn/ESkVK741uta/Arq5OERR6Iq4nf9X1opEpabd4JYbG5AoS2UsUZ1ny5toHjldOSG/Uz+RsFFuF59As8VEq9MzlD9s10DDKNyuIV7v30PaXjZXh+0Jom6kyG6Mgakqsfe55u9D6JwbpjuS5R8DfqomSgSsMEkreemXIRO8HHJBkIQ8="
  bucket: straycat-dhs-org-straycat-lambda-deploys
  local-dir: dist
  acl: public_read
  on:
    repo: tmclaugh/threatstack-to-aws-sns
