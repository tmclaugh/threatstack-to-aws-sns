language: python
python:
- '3.6'
install: pip install -r requirements.txt -t .
script:
- true
after_success:
- mkdir dist
- find ./ -name '*.pyc' -delete
- zip -r dist/threatstack-to-aws-sns.zip . -x '.git/*' -x 'dist/*'
- cp deploy/cloudformation.json dist/threatstack-to-aws-sns.json
- ls -al dist
- cat dist/threatstack-to-aws-sns.json
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id:
    secure: Cw22Kd/PmbVn8PE3KbZaIu/BW4/UHE8W4m8R/IQnErDmdPIGmz/NJvaJHhVST2Y/ZshaxExNfYKvZNdqqRlhHTSs3ZXMOGav7MvdAS6tZfcwvwRYdEDQUtOyauj5VKhLt5UU+A/2B0fGtAO7fWsQVAr0A99n9ISCC//IXrzAVOsd73o/rqCbkDgJ17eRvLm2LXh6hffxVVx9PWk7DYAZ+0dsetF9UcaS9Y4wzje4LXSGNuQYe1P7OoXdFb7FzTSrwh1MJ99UbO3rHmUgs0BUVkPpGw/iN6Rtyoe/GIgZgJWIAYPfW7UwZ4tbHKaKjLcNntimrvJVUyDBcSI7RD+ngM+l67E4n+6G71HLss7FKl2zgXgcbyHKGnA5ecunw4ZpH4r18NENCbylNYGj6+EYi9mNqtbun9pOT2T2XIGIe3YgiXrGxPsUS8rUhostBcJbp3VcC3IoRUk0mF/bKTHsQDUDANlfPwtVb6R6OkOm25WVM901IkHqlPlPTTQZO+2eOcP1QL0ofw9nRsG+CAtjA5mXmNwdbRwHneziHC+RO7UNgIj/YnehA8glDEyvQfMk7fkiYWi0dds60la4GzHON7V/Hs10r3v2Kawqk47u+9JoHhu/5kqhzg96rUC0shBnhekIhx9Wn0jiO8EZlLPCqrBXKotvWmOQqw4w+qmtlTQ=
  secret_access_key:
    secure: e6Bsp2OfAs+ID/zX8GUICSHW6/t+aFeZgKR35I4ZWy0x1Q1GmZdTk2xjQ5C1Uc+nzufih3BZR3mx4XS+CLSUZYGvnBXVBHbxpR92NCmC215nM1bcEBK3LCE+B6JVsifiFwTJ4PeE8hTDAsQptS1poTrFPwIn31jNfrs8y5BXHnzt1DPbrXLKn1VvUsjLHXhhtwR1PhwnMKza46NmkfIOHDVUL2ZNyZAA07YAueXUrbhwZJSXZn5MD89ezWbGtSyL4BjVdv6Pe3cOmILc/byYI16Wo2vjl+NoHSRw852zdUcx2dgj6mqUQfiXmwiWC2XQtE1+vOpszITwBt8N0/slLxKsdfAuEANsoaoAXyUNSkGG3fsOF8XtKinyQdVBxja2HZ7aVEb4WtvgKyzn584J0X2zbYaej7LDKlC/obQv8T0yv9aD9++C4YeWrVn6v3hTczRIQE2/S4U3cYruShKJFUl/ykyAtClETu4QXya8GOsfUIiqDwUEEvvLgPWI5XOVmxJVJbAD1HqEmtxDBbC5pHTP1VjiHTR2Jcz+KGf9XA6+Rnct6NVGDHFXAl5VhHIps6EvLgkb79d/f76lDotepKT3J2KG8MRciUqfUaPVPrQgCQ1nApoh0gOiKEzEG0Uxo1Nnr95UpEqtHsOfHQwzNiYsVQGWsJuz5CsI6FxrvUQ=
  bucket: straycat-dhs-org-straycat-lambda-deploys
  local-dir: dist
  acl: public_read
  on:
    repo: tmclaugh/threatstack-to-aws-sns
